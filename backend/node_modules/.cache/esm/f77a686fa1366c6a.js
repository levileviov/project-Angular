let con;_a13‍.x([["getCustomers",()=>getCustomers],["getCustomer",()=>getCustomer],["addCustomer",()=>addCustomer],["updateCustomer",()=>updateCustomer],["restoreCustomer",()=>restoreCustomer],["removeCustomer",()=>removeCustomer]]);_a13‍.w("../sqlConnect",[["con",["con"],function(v){con=v}]]);

       function getCustomers(req, res){ 
    
        let isDeleted = 0;
    
        if (req.query.deleted) {
            isDeleted = 1;
        }

    con.query("SELECT * FROM `customers`  WHERE `isDeleted` = ?",[isDeleted],  (err, result) => {
        if (err) {
            _a13‍.g.console.log(err);
        }

        res.send(result);
    });
}



           function  getCustomer(req, res) {
    con.query("SELECT * FROM `customers` WHERE `id` = ?", [req.params.id], (err, result) => {
        if (err) {
            _a13‍.g.console.log(err);
        }

        if (result.length) {
            res.send(result[0]);
        } else {
            res.send();
        }
    });
}

           function addCustomer(req, res) {
    con.query("INSERT INTO `customers` (`firstName`, `lastName`, `meansOfCommunication`, `phone`, `email`, `state`, `city`, `street`, `houseNamber`, `zipCode`, `info`,`isDeleted`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 0)", [req.body.firstName, req.body.lastName, req.body.meansOfCommunication , req.body.phone, req.body.email, req.body.state, req.body.city , req.body.street, req.body.houseNamber, req.body.zipCode, req.body.info], (err, result) => {
       
        if (err) {
            _a13‍.g.console.log(err);
        }else{
            console.log("working add");
            _a13‍.g.console.log(result);
        }
        res.send();
    });}


           function  updateCustomer(req, res) {
    con.query("UPDATE `customers` SET `firstName` = ?, `lastName`= ?, `meansOfCommunication`= ?, `phone`= ?, `email`= ?, `state`= ?, `city`= ?, `street`= ?, `houseNamber`= ?, `zipCode`= ?, `info`= ?,`isDeleted`= 0 WHERE `id` = ?", [req.body.firstName, req.body.lastName, req.body.meansOfCommunication , req.body.phone, req.body.email, req.body.state, req.body.city , req.body.street, req.body.houseNamber, req.body.zipCode, req.body.info, req.params.id], (err, result) => {
        if (err) {
            _a13‍.g.console.log(err);
        }else{
            console.log("working add");
            _a13‍.g.console.log(result);
        }

        res.send();
    });}


           function restoreCustomer(req, res) {
    con.query("UPDATE `customers` SET `isDeleted` = 0 WHERE `id` = ?", [req.params.id], (err, result) => {
        if (err) {
            _a13‍.g.console.log(err);
        }

        res.send();
    });}

           function removeCustomer(req, res) {
    con.query("UPDATE `customers` SET `isDeleted` = 1 WHERE `id` = ?", [req.params.id], (err, result) => {
        if (err) {
            _a13‍.g.console.log(err);
        }

        res.send();
    });
}